# OO设计原则

## 1. What's the OO？

OOP(Oriented-Object Programming)面向对象编程，故而就需要遵从面向对象(OO)设计原则。

## 2. OO的目的是什么？

举个例子，**淘宝网**从刚开始设计开发出来第一版到现在，中间已经进行过几次代码重构与新功能需求迭代，那是每次都需要新开发一套系统吗？显然
不是啊。不然，阿里的程序员们不是要累死的节奏。一个需要长久使用的产品或者需要运行数十年的系统，在开始设计的时候就需要考虑到系统是否方便
后期增加新功能且不会影响当下或引入新缺陷（可扩展性如何？）、是否可以灵活的调整代码结构进行增删逻辑且不会影响到其它部分（可修改性如何？）、
是否可以实现用相同接口的类或方法来替换系统中某些代码且不会影响到系统（可替换性如何？）。

所以，OO设计的目的就是可以尽量让我们的产品或者系统可以灵活应对上述变动。

## 3. OO设计原则有哪些？

- 单一职责原则(SRP)
    
    `一个类的设计应汇聚关注点于一件事`，不要做成大杂烩，什么都能做，不然变化源过多不仅不易于代码阅读与使用，且可能会带来丑陋的系统错误风险。

    比如，进行报表字段操作的Service就只提供和报表字段相关的业务逻辑服务即可，不需要Care其他的细节。如果你把报表图标以及查询条件配置设置
都放到这个Service来，那请问你还能理清楚逻辑关系吗？

- 开放封闭原则(OCP, 继承和多态)

    软件实体（类、模块、函数等）可以扩展但是不能修改。这个最为突出的便是通过对抽象父类方法的重写，来实现不同的行为（改变固有行为），如此
变保持了父类的稳定，且实现了扩展新功能。所以该设计原则的核心思想就是对抽象编程，而不对具体编程，因为抽象相对稳定。

    比如：有个创建数据源(DataSource)，然后针对数据源设计统一定制的属性的需求，但是我们有MySQL、Oracle、SQL Server 3种数据源，那此时怎
么做才好呢？我们其实可以提供一个有创建数据源抽象方法的抽象类，然后该类中还有一些针对数据源进行设置定制属性的方法，然后只需要编写子类继承
该抽象类且根据需要提供创建数据源的实现即可（哎呀，一不小心把 `抽象工厂设计模式` 都暴露出来了）。
 
- 依赖倒置原则(DIP, 面向接口编程)

    依赖于抽象，就是对接口编程：
    ```
        List<String> list = new ArrayList<>(10);
    ```
   
    但是有些时候不可避免的需要依赖于具体实现细节的：
    ```
        HashTable<String, String> hashTable = new HashTable<>();
    ```
    因为如果通过Map来接收HashTable,就会丢失掉HashTable自有行为。

- 里氏代换原则(LSP, 抽象和多态)

    子类型必须能够替换他们的父类型。只有遵循了LSP，才能保证继承复用是可靠的。LSP能够保证系统具有良好的`扩展性`,同时实现基于多态的抽象
机制，能够减少代码冗余，避免运行期的类型判断。

- 接口隔离原则(ISP)

    多个和客户相关的接口要好于一个通用接口。分离的手段主要由以下两种：1、`委托分离`，通过增加一个类型来委托客户的请求，隔离客户与接口的直
接依赖，但是会增加系统开销；2、`多重继承分离`，通过接口多继承来实现客户的需求，这种方式是较好的。

- 迪米特原则

    该设计原则主要强调的是`类与类之间的相互关系，尽量要保证类之间的松耦合`。也就是说，如果两个类不必彼此直接通信，那么两个类就不应该直接
的相互作用，如果必须要一个类调用另一个类的方法，可以通过第三者转发这个调用。

- 合成/聚合复用原则

    尽量使用合成/聚合，而减少使用继承。合成(Composition)和聚合(Aggregation)都是关联的特殊种类，聚合表示一个弱的拥有关系；合成则是一
种强的拥有关系，体现了严格的部分和整体的关系，部分和整体的声明周期一样。

    聚合：汽车和引擎
    
    合成：人和心脏
    
## 4. OO设计原则和目标之间关系？

- 可扩展性(Extensibility)：允许一个具有同样接口的新类替代旧类，是对抽象接口的复用。

    开/闭原则、里氏替换原则、依赖倒转原则、合成/聚合复用原则

- 可修改性(Flexibility)：模块相对独立，通信尽可能少。这样当一个模块修改时，对别的模块的影响很小。

    开/闭原则、迪米特法则、接口隔离原则

- 可替换性(Pluggability)：当一部分不再满足需要时，可以将旧的部分拔出，新的部分插入。

    开/闭原则、里氏代换原则、依赖倒转原则、合成/聚合复用原则